// const roadmap = {
//   "id": 46,
//   "title": "React Development Learning Roadmap",
//   "description": "This roadmap provides a comprehensive, structured learning path for becoming proficient in React development, from the basics to more advanced topics.",
//   "input_query": "Learn React development",
//   "status": "ready",
//   "difficulty_level": "beginner",
//   "estimated_duration_hours": 120,
//   "learning_objectives": [
//       "Understand the basics of React",
//       "Learn how to create and manage React Components",
//       "Understand and implement state management using Redux",
//       "Learn to create routes using React Router",
//       "Understand React Hooks and their usage",
//       "Develop a complete web application using React"
//   ],
//   "ai_keywords": [
//       "React",
//       "JavaScript",
//       "HTML",
//       "CSS",
//       "JSX",
//       "Components",
//       "Props",
//       "State",
//       "Lifecycle",
//       "Hooks",
//       "Routing",
//       "Redux"
//   ],
//   "generation_metadata": {
//       "current_step": "step_3_completed",
//       "last_updated": "2025-08-21T20:25:40Z"
//   },
//   "modules": [
//       {
//           "id": 310,
//           "title": "Introduction to React",
//           "description": "This module covers the basics of React, its importance, and its installation process",
//           "module_type": "module",
//           "is_leaf": true,
//           "video_url": "https://www.youtube.com/watch?v=Ke90Tje7VS0",
//           "order_index": 0,
//           "estimated_duration_minutes": 180,
//           "difficulty_level": "beginner",
//           "status": "generating",
//           "children": [],
//           "lectures": [
//               {
//                   "id": 139,
//                   "title": "Introduction to React",
//                   "lecture_type": "theory",
//                   "order_index": 0,
//                   "estimated_duration_minutes": 45,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 140,
//                   "title": "React Components & JSX",
//                   "lecture_type": "theory",
//                   "order_index": 1,
//                   "estimated_duration_minutes": 45,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               }
//           ],
//           "tags": []
//       },
//       {
//           "id": 311,
//           "title": "React Components and Props",
//           "description": "This module focuses on creating and managing React Components and understanding Props",
//           "module_type": "module",
//           "is_leaf": true,
//           "video_url": "https://www.youtube.com/watch?v=IhWFtNYPJF4",
//           "order_index": 1,
//           "estimated_duration_minutes": 240,
//           "difficulty_level": "beginner",
//           "status": "generating",
//           "children": [],
//           "lectures": [
//               {
//                   "id": 141,
//                   "title": "Introduction to React Components",
//                   "lecture_type": "theory",
//                   "order_index": 0,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "https://www.youtube.com/watch?v=Ke90Tje7VS0",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 142,
//                   "title": "Understanding Props in React",
//                   "lecture_type": "theory",
//                   "order_index": 1,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "https://www.youtube.com/watch?v=qD7IcDJhOmw",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               }
//           ],
//           "tags": []
//       },
//       {
//           "id": 312,
//           "title": "React State and Lifecycle",
//           "description": "Learn about the State in React and component lifecycle methods",
//           "module_type": "module",
//           "is_leaf": true,
//           "video_url": "https://www.youtube.com/watch?v=Oioo0IdoEls",
//           "order_index": 2,
//           "estimated_duration_minutes": 240,
//           "difficulty_level": "intermediate",
//           "status": "generating",
//           "children": [],
//           "lectures": [
//               {
//                   "id": 143,
//                   "title": "Understanding State in React",
//                   "lecture_type": "theory",
//                   "order_index": 0,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 144,
//                   "title": "Lifecycle of Components",
//                   "lecture_type": "theory",
//                   "order_index": 1,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 145,
//                   "title": "React State and Lifecycle: Practical Application",
//                   "lecture_type": "practical",
//                   "order_index": 2,
//                   "estimated_duration_minutes": 90,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               }
//           ],
//           "tags": []
//       },
//       {
//           "id": 313,
//           "title": "React Hooks",
//           "description": "Understand the concept of Hooks in React and their usage",
//           "module_type": "module",
//           "is_leaf": true,
//           "video_url": "https://www.youtube.com/watch?v=dpw9EHDh2bM",
//           "order_index": 3,
//           "estimated_duration_minutes": 180,
//           "difficulty_level": "intermediate",
//           "status": "generating",
//           "children": [],
//           "lectures": [
//               {
//                   "id": 146,
//                   "title": "Introduction to React Hooks",
//                   "lecture_type": "theory",
//                   "order_index": 0,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 147,
//                   "title": "Deep Dive into useState and useEffect Hooks",
//                   "lecture_type": "theory",
//                   "order_index": 1,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 148,
//                   "title": "Working with useContext, useReducer, useCallback, useMemo, and useRef Hooks",
//                   "lecture_type": "theory",
//                   "order_index": 2,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "intermediate",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               }
//           ],
//           "tags": []
//       },
//       {
//           "id": 314,
//           "title": "React Router",
//           "description": "Learn to create and manage routes in your React application",
//           "module_type": "module",
//           "is_leaf": true,
//           "video_url": "https://www.youtube.com/watch?v=Law7wfdg_ls",
//           "order_index": 4,
//           "estimated_duration_minutes": 180,
//           "difficulty_level": "intermediate",
//           "status": "generating",
//           "children": [],
//           "lectures": [
//               {
//                   "id": 153,
//                   "title": "Introduction to React Router",
//                   "lecture_type": "theory",
//                   "order_index": 0,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 154,
//                   "title": "Creating Routes with React Router",
//                   "lecture_type": "practical",
//                   "order_index": 1,
//                   "estimated_duration_minutes": 120,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 155,
//                   "title": "Nested Routes and Redirects with React Router",
//                   "lecture_type": "practical",
//                   "order_index": 2,
//                   "estimated_duration_minutes": 120,
//                   "difficulty_level": "intermediate",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               }
//           ],
//           "tags": []
//       },
//       {
//           "id": 315,
//           "title": "Redux in React",
//           "description": "Understand the concept of Redux for state management in React applications",
//           "module_type": "module",
//           "is_leaf": true,
//           "video_url": "https://www.youtube.com/watch?v=93p3LxR9xfM",
//           "order_index": 5,
//           "estimated_duration_minutes": 240,
//           "difficulty_level": "advanced",
//           "status": "generating",
//           "children": [],
//           "lectures": [
//               {
//                   "id": 151,
//                   "title": "Introduction to Redux",
//                   "lecture_type": "theory",
//                   "order_index": 0,
//                   "estimated_duration_minutes": 45,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 152,
//                   "title": "Setting Up Redux in a React Application",
//                   "lecture_type": "practical",
//                   "order_index": 1,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": null,
//                   "quiz_count": 0,
//                   "problem_count": 0
//               }
//           ],
//           "tags": []
//       },
//       {
//           "id": 316,
//           "title": "Building a Full-Fledged React Application",
//           "description": "Apply all the learned concepts and build a complete React application",
//           "module_type": "module",
//           "is_leaf": true,
//           "video_url": "https://www.youtube.com/watch?v=7CqJlxBYj-M",
//           "order_index": 6,
//           "estimated_duration_minutes": 480,
//           "difficulty_level": "advanced",
//           "status": "generating",
//           "children": [],
//           "lectures": [
//               {
//                   "id": 156,
//                   "title": "Introduction to Building a React Application",
//                   "lecture_type": "theory",
//                   "order_index": 0,
//                   "estimated_duration_minutes": 60,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "https://www.youtube.com/watch?v=4UZrsTqkcW4",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 157,
//                   "title": "Creating Components in React",
//                   "lecture_type": "theory",
//                   "order_index": 1,
//                   "estimated_duration_minutes": 90,
//                   "difficulty_level": "beginner",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "https://www.youtube.com/watch?v=Ke90Tje7VS0",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 158,
//                   "title": "Advanced Topics: Lifecycle, Hooks, and Routing",
//                   "lecture_type": "theory",
//                   "order_index": 2,
//                   "estimated_duration_minutes": 120,
//                   "difficulty_level": "intermediate",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "https://www.youtube.com/watch?v=0ZJgIjIuY7U",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 159,
//                   "title": "State Management with Redux",
//                   "lecture_type": "theory",
//                   "order_index": 3,
//                   "estimated_duration_minutes": 120,
//                   "difficulty_level": "intermediate",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "https://www.youtube.com/watch?v=93p3LxR9xfM",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               },
//               {
//                   "id": 160,
//                   "title": "Building a Full-Fledged React Application",
//                   "lecture_type": "practical",
//                   "order_index": 4,
//                   "estimated_duration_minutes": 180,
//                   "difficulty_level": "intermediate",
//                   "status": "ready",
//                   "has_content": true,
//                   "video_url": "https://www.youtube.com/watch?v=m_u6P5k0vP0",
//                   "quiz_count": 0,
//                   "problem_count": 0
//               }
//           ],
//           "tags": []
//       }
//   ],
//   "tags": [],
//   "created_at": "2025-08-21T20:21:29.960Z",
//   "updated_at": "2025-08-21T20:25:40.458Z"
// }


// First node is always roadmap title with its id and desctiption
//We will create node for each module and in side module if we have children or we have lectures


// We will create first node and all its modules

// Then for each modules we will create node and all its children or lectures

export const getRoadmapNodes = (roadmap) => {
  console.log('roadmap inside getRoadmapNodes', roadmap);
  const nodes = [];
  nodes.push({
    id: roadmap.id.toString(),
    data: {
      label: roadmap.title,
      description: roadmap.description,
      status: roadmap.status,
      difficulty_level: roadmap.difficulty_level,
      estimated_duration_hours: roadmap.estimated_duration_hours,
      learning_objectives: roadmap.learning_objectives,
      ai_keywords: roadmap.ai_keywords,
      generation_metadata: roadmap.generation_metadata,
      isLeaf: false,
      isHeader: true,
    },
    position: { x: 0, y: 0 },
  });

  roadmap.modules.forEach((module) => {
    nodes.push({
      id: module.id.toString(),
      data: {
        label: module.title,
        description: module.description,
        video_url: module?.video_url,
        lectures: module?.content_md,
        quizzes: module?.quizzes,
        problems: module?.problems,
        isLeaf: false,
        isModule: true,
        isHeader: false,
      },
      position: { x: 0, y: 0 },
    });

    module.children.forEach((child) => {
      nodes.push({
        id: child.id.toString(),
        data: {
          label: child.title,
          description: child.description,
          video_url: child?.video_url,
          lectures: child?.content_md,
          quizzes: child?.quizzes,
          problems: child?.problems,
          isLeaf: false,
          isModule: true,
          isHeader: false,
        },
        position: { x: 0, y: 0 },
      });
    });

    module.lectures.forEach((lecture) => {
      nodes.push({
        id: lecture.id.toString(),
        data: {
          label: lecture.title,
          description: lecture.description,
          video_url: lecture?.video_url,
          lectures: lecture?.content_md,
          quizzes: lecture?.quizzes,
          problems: lecture?.problems,
          isLeaf: true,
          isModule: false,
          isHeader: false,
        },
        position: { x: 0, y: 0 },
      });
    });
  });

  return nodes;
};


// we will first create edges between all modules with first node
// then we will create edges between all children of modules with module
// then we will create edges between all lectures of module with module
export const getRoadmapEdges = (roadmap) => {
  const edges = [];

  // Create edges between roadmap and all modules
  roadmap.modules.forEach((module) => {
    edges.push({
      id: `${roadmap.id}-${module.id}`,
      source: roadmap.id.toString(),
      target: module.id.toString(),
    });
  });

  // Create edges between modules and their children
  roadmap.modules.forEach((module) => {
    module.children.forEach((child) => {
      edges.push({
        id: `${module.id}-${child.id}`,
        source: module.id.toString(),
        target: child.id.toString(),
      });
    });
  });

  // Create edges between modules and their lectures
  roadmap.modules.forEach((module) => {
    module.lectures.forEach((lecture) => {
      edges.push({
        id: `${module.id}-${lecture.id}`,
        source: module.id.toString(),
        target: lecture.id.toString(),
      });
    });
  });

  return edges;
};

// console.log(getRoadmapNodes(roadmap));
// console.log(getRoadmapEdges(roadmap));